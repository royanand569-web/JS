<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tic Tac Toe AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-sm">
    <h1 class="text-2xl font-bold text-center mb-4">Tic Tac Toe ðŸ¤–</h1>

    <p id="status" class="text-center mb-4 font-medium">
      Your turn (X)
    </p>

    <div class="grid grid-cols-3 gap-2 aspect-square">
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
      <button class="cell"></button>
    </div>

    <button
      id="reset"
      class="mt-5 w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition"
    >
      Reset Game
    </button>
  </div>

  <script>
    const cells = document.querySelectorAll(".cell");
    const statusText = document.getElementById("status");
    const resetBtn = document.getElementById("reset");

    const HUMAN = "X";
    const AI = "O";
    let board = Array(9).fill(null);
    let gameActive = true;

    const wins = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6],
    ];

    cells.forEach((cell, i) => {
      cell.className =
        "cell bg-gray-200 rounded-lg text-4xl font-bold flex items-center justify-center hover:bg-gray-300 transition aspect-square";
      cell.addEventListener("click", () => humanMove(i));
    });

    function humanMove(i) {
      if (!gameActive || board[i]) return;
      makeMove(i, HUMAN);

      if (gameActive) {
        statusText.textContent = "Computer thinking...";
        setTimeout(aiMove, 400);
      }
    }

    function aiMove() {
      const best = minimax(board, AI).index;
      makeMove(best, AI);
    }

    function makeMove(i, player) {
      board[i] = player;
      cells[i].textContent = player;

      if (checkWin(player)) {
        statusText.textContent =
          player === HUMAN ? "You win! ðŸŽ‰" : "Computer wins ðŸ¤–";
        gameActive = false;
      } else if (!board.includes(null)) {
        statusText.textContent = "It's a draw!";
        gameActive = false;
      } else {
        statusText.textContent =
          player === HUMAN ? "Computer's turn" : "Your turn (X)";
      }
    }

    function checkWin(player) {
      return wins.some(combo =>
        combo.every(i => board[i] === player)
      );
    }

    function minimax(newBoard, player) {
      const empty = newBoard
        .map((v, i) => (v === null ? i : null))
        .filter(v => v !== null);

      if (checkWinner(newBoard, HUMAN)) return { score: -10 };
      if (checkWinner(newBoard, AI)) return { score: 10 };
      if (empty.length === 0) return { score: 0 };

      const moves = [];

      for (let i of empty) {
        const move = { index: i };
        newBoard[i] = player;

        const result = minimax(
          newBoard,
          player === AI ? HUMAN : AI
        );
        move.score = result.score;

        newBoard[i] = null;
        moves.push(move);
      }

      return player === AI
        ? moves.reduce((a, b) => (a.score > b.score ? a : b))
        : moves.reduce((a, b) => (a.score < b.score ? a : b));
    }

    function checkWinner(boardState, player) {
      return wins.some(combo =>
        combo.every(i => boardState[i] === player)
      );
    }

    resetBtn.addEventListener("click", () => {
      board.fill(null);
      cells.forEach(c => (c.textContent = ""));
      gameActive = true;
      statusText.textContent = "Your turn (X)";
    });
  </script>

</body>
</html>
